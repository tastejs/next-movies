const TRACKING_ID="UA-172478909-4",TRACKING_VERSION="1",NULL_VALUE="(not set)",dimensions={TRACKING_VERSION:"dimension1",CLIENT_ID:"dimension2",WINDOW_ID:"dimension3",HIT_ID:"dimension4",HIT_TIME:"dimension5",HIT_TYPE:"dimension6",HIT_SOURCE:"dimension7",VISIBILITY_STATE:"dimension8"},metrics={RESPONSE_END_TIME:"metric1",DOM_LOAD_TIME:"metric2",WINDOW_LOAD_TIME:"metric3"};export const init=()=>{window.ga=window.ga||((...e)=>(ga.q=ga.q||[]).push(e)),createTracker(),trackErrors(),trackCustomDimensions(),sendInitialPageview(),sendNavigationTimingMetrics()};export const trackError=(e={},n={})=>{ga("send","event",Object.assign({eventCategory:"Error",eventAction:e.name||"(no error name)",eventLabel:`${e.message}\n${e.stack||"(no stack trace)"}`,nonInteraction:!0},n))};const createTracker=()=>{ga("create",TRACKING_ID,"auto"),ga("set","transport","beacon")},trackErrors=()=>{const e=window.__e&&window.__e.q||[],n=e=>{const n=e.error||{message:`${e.message} (${e.lineno}:${e.colno})`};trackError(n,{eventCategory:"Uncaught Error"})};for(let t of e)n(t);window.addEventListener("error",n)},trackCustomDimensions=()=>{Object.keys(dimensions).forEach(e=>{ga("set",dimensions[e],NULL_VALUE)}),ga(e=>{e.set({[dimensions.TRACKING_VERSION]:"1",[dimensions.CLIENT_ID]:e.get("clientId"),[dimensions.WINDOW_ID]:uuid()})}),ga(e=>{const n=e.get("buildHitTask");e.set("buildHitTask",e=>{const t=e.get("queueTime")||0;e.set(dimensions.HIT_TIME,String(new Date-t),!0),e.set(dimensions.HIT_ID,uuid(),!0),e.set(dimensions.HIT_TYPE,e.get("hitType"),!0),e.set(dimensions.VISIBILITY_STATE,document.visibilityState,!0),n(e)})})},sendInitialPageview=()=>{ga("send","pageview",{[dimensions.HIT_SOURCE]:"pageload"})},sendNavigationTimingMetrics=()=>{if(!window.performance||!window.performance.timing)return;if("complete"!=document.readyState)return void window.addEventListener("load",sendNavigationTimingMetrics);const e=performance.timing,n=e.navigationStart,t=Math.round(e.responseEnd-n),i=Math.round(e.domContentLoadedEventStart-n),o=Math.round(e.loadEventStart-n);((...e)=>e.every(e=>e>0&&e<6e6))(t,i,o)&&ga("send","event",{eventCategory:"Navigation Timing",eventAction:"track",eventLabel:NULL_VALUE,nonInteraction:!0,[metrics.RESPONSE_END_TIME]:t,[metrics.DOM_LOAD_TIME]:i,[metrics.WINDOW_LOAD_TIME]:o})},uuid=function e(n){return n?(n^16*Math.random()>>n/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,e)};